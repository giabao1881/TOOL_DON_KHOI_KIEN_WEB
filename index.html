<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>baotg10 | Tải Tool ĐKK & BTK</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <style>
    :root{
      --bg0:#0b1220; --bg1:#0f172a;
      --border: rgba(255,255,255,.10);
      --text:#e5e7eb; --muted:#94a3b8;
      --p1:#3b82f6; --p2:#8b5cf6; --p3:#ec4899;
      --shadow: 0 16px 36px rgba(0,0,0,.32);
      --r:16px; --r2:12px;
      --w: 880px;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family: ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial}
    body{
      min-height:100vh;color:var(--text);
      background:
        radial-gradient(900px 520px at 12% 10%, rgba(59,130,246,.18), transparent 55%),
        radial-gradient(820px 460px at 88% 22%, rgba(236,72,153,.14), transparent 55%),
        radial-gradient(860px 480px at 55% 105%, rgba(139,92,246,.16), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      padding:14px;
    }
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--w);margin:0 auto}

    .card{
      border:1px solid var(--border);
      border-radius: var(--r);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
    }

    /* top bar */
    .top{
      position: sticky; top: 10px; z-index: 10;
      display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
      padding:10px 12px;
    }
    .brand{display:flex;align-items:center;gap:10px}
    .logo{
      width:36px;height:36px;border-radius:12px;
      display:grid;place-items:center;font-weight:950;color:#fff;
      background: linear-gradient(135deg,var(--p1),var(--p2));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 10px 22px rgba(59,130,246,.20);
    }
    .b1{font-weight:950}
    .b2{color:var(--muted);font-size:.83rem;margin-top:1px}

    .btns{display:flex;gap:8px;flex-wrap:wrap}
    .btn{
      border:none;border-radius:12px;padding:9px 11px;
      cursor:pointer;font-weight:950;font-size:.88rem;
      display:inline-flex;align-items:center;gap:8px;
      transition:.16s ease; user-select:none;
    }
    .btn:hover{transform: translateY(-1px); box-shadow: 0 12px 20px rgba(0,0,0,.22)}
    .btn:active{transform: translateY(1px)}
    .btn.primary{background: linear-gradient(90deg,var(--p1),var(--p2)); color:#fff}
    .btn.ghost{background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.14); color: var(--text)}

    /* hero */
    .hero{margin-top:10px;padding:14px}
    .title{
      font-size: clamp(1.45rem, 4.1vw, 2.05rem);
      font-weight: 950; letter-spacing:-.5px; line-height:1.1;
      background: linear-gradient(90deg,var(--p1),var(--p2),var(--p3));
      -webkit-background-clip:text;background-clip:text;color:transparent;
      margin-bottom: 6px;
    }
    .sub{color:var(--muted);line-height:1.6;font-size:.98rem}

    /* notes box */
    .notes{margin-top:10px;padding:12px 14px}
    .notesHead{
      display:flex;align-items:center;gap:10px;flex-wrap:wrap;
      margin-bottom:8px;
    }
    .notesIcon{
      width:34px;height:34px;border-radius:12px;
      display:grid;place-items:center;
      background: rgba(245,158,11,.12);
      border:1px solid rgba(245,158,11,.22);
      color:#fbbf24;
      flex:0 0 auto;
    }
    .notesTitle{font-weight:950}
    .notesDesc{color:var(--muted);font-size:.92rem;line-height:1.55}
    details.notesToggle{
      margin-top:10px;
      border:1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      background: rgba(15,23,42,.26);
      overflow:hidden;
    }
    details.notesToggle > summary{
      cursor:pointer;
      list-style:none;
      padding:10px 12px;
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      font-weight:950;
      user-select:none;
    }
    details.notesToggle > summary::-webkit-details-marker{display:none}
    .chev{opacity:.8}
    .noteBody{padding:10px 12px 12px}
    .noteList{margin:0;padding-left:18px}
    .noteList li{
      margin:8px 0;
      color: rgba(203,213,225,.92);
      line-height:1.55;
      font-size:.93rem;
    }
    .noteList b{color:#fff}
    .noteSteps{
      margin-top:6px;
      padding:9px 10px;
      border-radius: 12px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      color: rgba(203,213,225,.92);
      font-size:.92rem;
      line-height:1.55;
    }

    /* tools */
    .list{margin-top:10px;display:grid;gap:10px}
    .tool{
      padding:14px;
      border-radius: var(--r);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(15,23,42,.32);
      position:relative; overflow:hidden;
    }
    .tool::before{
      content:""; position:absolute; left:0; top:0; right:0; height:3px;
      background: linear-gradient(90deg,var(--p1),var(--p2),var(--p3)); opacity:.85;
    }
    .row{display:flex;gap:10px;align-items:flex-start;justify-content:space-between;flex-wrap:wrap}
    .left{display:flex;gap:10px;align-items:flex-start}
    .ico{
      width:40px;height:40px;border-radius:12px;
      display:grid;place-items:center;
      background: rgba(59,130,246,.12);
      border:1px solid rgba(59,130,246,.25);
      color: rgba(147,197,253,.95);
      flex:0 0 auto;
      margin-top:2px;
    }
    .name{font-size:1.05rem;font-weight:950;line-height:1.25}
    .desc{margin-top:6px;color:var(--muted);line-height:1.55;font-size:.93rem}
    .meta{margin-top:8px;display:flex;gap:6px;flex-wrap:wrap}
    .tag{
      padding:5px 9px;border-radius:999px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      color: rgba(203,213,225,.9);
      font-size:.80rem;font-weight:900;
    }
    .badge{
      display:inline-flex;align-items:center;gap:6px;
      padding:4px 9px;border-radius:999px;
      font-size:.80rem;font-weight:950;border:1px solid;
      margin-left:6px; transform: translateY(-1px);
    }
    .live{background: rgba(34,197,94,.12); color:#22c55e; border-color: rgba(34,197,94,.25)}
    .soon{background: rgba(245,158,11,.12); color:#f59e0b; border-color: rgba(245,158,11,.25)}

    /* actions: 2 buttons */
    .actions{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:8px;
    }
    @media (max-width: 620px){
      .actions{grid-template-columns:1fr}
    }

    .dl{
      width:100%;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding: 11px 12px;
      border-radius: 12px;
      font-weight: 950;
      font-size: .92rem;
      border:none;
      cursor:pointer;
      transition:.16s ease;
      color:#fff;
      background: linear-gradient(90deg, rgba(59,130,246,.95), rgba(139,92,246,.95));
    }
    .dl:hover{transform: translateY(-1px); box-shadow: 0 14px 22px rgba(59,130,246,.18)}
    .dl:active{transform: translateY(1px)}
    .dl.disabled{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.14);
      color: rgba(203,213,225,.8);
      cursor:not-allowed;
      box-shadow:none;
    }

    .guide{
      width:100%;
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding: 11px 12px;
      border-radius: 12px;
      font-weight: 950;
      font-size: .92rem;
      border:1px solid rgba(255,255,255,.14);
      cursor:pointer;
      transition:.16s ease;
      color: var(--text);
      background: rgba(255,255,255,.06);
    }
    .guide:hover{transform: translateY(-1px); background: rgba(59,130,246,.10)}
    .guide.disabled{opacity:.6; pointer-events:none}

    .foot{
      margin-top:10px;
      text-align:center;
      color: rgba(100,116,139,.95);
      font-size: .88rem;
      padding: 10px 6px 18px;
    }
    .hl{
      font-weight: 950;
      background: linear-gradient(90deg,var(--p1),var(--p2),var(--p3));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top card">
      <div class="brand">
        <div class="logo">B</div>
        <div>
          <div class="b1">baotg10</div>
          <div class="b2">Tải Tool ĐKK & BTK (ZIP)</div>
        </div>
      </div>

      <div class="btns">
        <a class="btn ghost" id="homeBtn" href="#"><i class="fa-solid fa-grid-2"></i> Công cụ khác</a>
        <a class="btn primary" href="mailto:baotg10@vpbank.com.vn"><i class="fa-solid fa-envelope"></i> Liên hệ</a>
      </div>
    </div>

    <div class="hero card">
      <div class="title">Tải Tool ĐKK & BTK</div>
      <div class="sub">Bấm “Tải ngay” để tải trực tiếp. Nút “Hướng dẫn” sẽ mở video.</div>
    </div>

    <!-- ===== LƯU Ý HIỂN THỊ CHO NGƯỜI DÙNG ===== -->
    <div class="notes card">
      <div class="notesHead">
        <div class="notesIcon"><i class="fa-solid fa-triangle-exclamation"></i></div>
        <div>
          <div class="notesTitle">Lưu ý khi sử dụng</div>
          <div class="notesDesc">Đọc nhanh 10 giây để tránh lỗi mở file / chạy lại dữ liệu.</div>
        </div>
      </div>

      <details class="notesToggle">
        <summary>
          <span><i class="fa-solid fa-circle-info"></i> Hướng dẫn xử lý Protected View & tạo lại hồ sơ</span>
          <span class="chev"><i class="fa-solid fa-chevron-down"></i></span>
        </summary>

        <div class="noteBody">
          <ol class="noteList">
            <li>
              <b>Tắt Protected View (Word)</b> nếu file tải về bị chặn hoặc không cho chỉnh sửa/chạy:
              <div class="noteSteps">
                Word → <b>File</b> → <b>Options</b> → <b>Trust Center</b> → <b>Trust Center Settings</b> → <b>Protected View</b> → bỏ chọn các ô <b>“Enable Protected View”</b> → <b>OK</b>.
              </div>
            </li>
            <li>
              <b>Nếu đã tạo đơn rồi mà muốn tạo lại cho đúng “mã khách hàng” đó</b>:
              <div class="noteSteps">
                Hãy <b>xóa</b> người đó khỏi danh sách đã tạo hoặc <b>di chuyển</b> sang chỗ khác (để tool không hiểu là “đã có rồi”).  
                Trường hợp vẫn cần chạy lại, bạn có thể <b>Save As</b> sang file/thư mục khác hoặc <b>xóa/di chuyển</b> file kết quả cũ rồi chạy lại.
              </div>
            </li>
          </ol>
        </div>
      </details>
    </div>

    <div class="list" id="toolList"></div>

    <div class="foot">© 2024 <span class="hl">baotg10</span></div>
  </div>

  <script>
    // ===== LINK QUAY VỀ TRANG BAOTG10 =====
    const HOME_URL = "https://giabao1881.github.io/baotg10";
    document.getElementById("homeBtn").href = HOME_URL;

    // ===== CONFIG JSON Ở CÙNG THƯ MỤC =====
    const CONFIG_URL = "./dkk-btk-config.json";

    // ===== TẢI TRỰC TIẾP =====
    function directDownload(url, filename){
      const a = document.createElement("a");
      a.href = url;
      a.download = filename || "";
      a.rel = "noopener";
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    function esc(s){ return (s||"").replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    function renderTool(t){
      const isLive = (t.status || "").toUpperCase() === "LIVE";
      const badgeClass = isLive ? "badge live" : "badge soon";
      const badgeText = isLive ? "LIVE" : (t.status || "SOON");

      const tagsHtml = (t.tags || []).map(x => `<span class="tag">#${esc(x)}</span>`).join("");
      const canDownload = !!t.latestUrl;
      const canGuide = !!t.guideUrl;

      const fileName = t.fileName || (t.latestUrl ? t.latestUrl.split("/").pop().split("?")[0] : "");

      const downloadBtn = canDownload
        ? `<button class="dl" data-url="${esc(t.latestUrl)}" data-name="${esc(fileName)}">
             <i class="fa-solid fa-download"></i> Tải ngay
           </button>`
        : `<button class="dl disabled" disabled>
             <i class="fa-solid fa-lock"></i> Chưa mở tải
           </button>`;

      const guideBtn = canGuide
        ? `<a class="guide" href="${esc(t.guideUrl)}" target="_blank" rel="noopener">
             <i class="fa-solid fa-circle-play"></i> Hướng dẫn
           </a>`
        : `<span class="guide disabled">
             <i class="fa-solid fa-circle-play"></i> Hướng dẫn
           </span>`;

      return `
        <div class="tool">
          <div class="row">
            <div class="left">
              <div class="ico"><i class="fa-solid ${esc(t.icon || "fa-screwdriver-wrench")}"></i></div>
              <div>
                <div class="name">
                  ${esc(t.name || "")}
                  <span class="${badgeClass}">${esc(badgeText)}</span>
                </div>
                <div class="desc">${esc(t.desc || "")}</div>

                <div class="meta">
                  <span class="tag">v${esc(t.version || "0.0.0")}</span>
                  ${tagsHtml}
                </div>

                ${t.note ? `<div class="desc" style="margin-top:7px;color:rgba(100,116,139,.95)"><i class="fa-solid fa-note-sticky"></i> ${esc(t.note)}</div>` : ``}
              </div>
            </div>
          </div>

          <div class="actions">
            ${downloadBtn}
            ${guideBtn}
          </div>
        </div>
      `;
    }

    function bindDownloadButtons(){
      document.querySelectorAll(".dl[data-url]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const url = btn.getAttribute("data-url");
          const name = btn.getAttribute("data-name") || "";
          directDownload(url, name);
        });
      });
    }

    async function loadConfig(){
      try{
        const res = await fetch(CONFIG_URL, { cache: "no-store" });
        if(!res.ok) throw new Error("HTTP " + res.status);
        const cfg = await res.json();

        const list = document.getElementById("toolList");
        list.innerHTML = (cfg.tools || []).map(renderTool).join("");
        bindDownloadButtons();
      }catch(e){
        // fallback nếu JSON lỗi
        const fallback = {
          tools: [
            {
              name:"Tool Đơn Khởi Kiện Tín Chấp (ĐKK)",
              status:"LIVE",
              icon:"fa-gavel",
              desc:"Tải tool ĐKK dạng .zip",
              version:"1.0.0",
              latestUrl:"./TOOL_DON_KHOI_KIEN.zip",
              fileName:"TOOL_DON_KHOI_KIEN.zip",
              guideUrl:"",
              tags:["zip"]
            },
            {
              name:"Tool Bảng Tự Khai Tín Chấp (BTK)",
              status:"LIVE",
              icon:"fa-file-contract",
              desc:"Tải tool BTK dạng .zip",
              version:"1.0.0",
              latestUrl:"./TOOL_BTK_TINCHAP.zip",
              fileName:"TOOL_BTK_TINCHAP.zip",
              guideUrl:"",
              tags:["zip"]
            }
          ]
        };
        const list = document.getElementById("toolList");
        list.innerHTML = fallback.tools.map(renderTool).join("");
        bindDownloadButtons();
      }
    }

    loadConfig();
  </script>
</body>
</html>
